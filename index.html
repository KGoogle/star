<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>편지</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Batang&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: #000;
        }

        body {
            transition: background 1s ease-in-out;
        }

        #universe {
            position: fixed;
            inset: 0;
            width: 100vw;
            height: 100vh;
            display: block;
            z-index: 1;
        }

        .envelope-wrapper {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            z-index: 10;
            transition: transform 1s ease-in-out, opacity 1s ease-in-out;
        }
        
        .envelope {
            position: relative;
            width: 85vw;
            max-width: 250px;
            height: 150px;
            background-color: transparent;
            border: 2px solid white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }

        .flap.top {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            transform-origin: top;
            transition: transform 0.7s ease-in-out;
        }

        .flap.top::before,
        .flap.top::after {
            content: '';
            position: absolute;
            top: 0;
            width: 146px;
            height: 2px;
            background-color: white;
        }

        .flap.top::before {
            left: 0;
            transform-origin: left top;
            transform: rotate(31deg);
        }
        
        .flap.top::after {
            right: 0;
            transform-origin: right top;
            transform: rotate(-31deg);
        }

        .star {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 35px;
            color: #ffffff;
            text-shadow: 0 0 10px #ffffff;
            transition: opacity 0.5s;
        }

        .click-to-open {
            text-align: center;
            margin-top: 20px;
            font-size: 20px;
            color: #ffffff;
            font-weight: bold;
            font-family: 'Gowun Batang', serif;
            text-shadow: 0 0 5px rgba(255,255,255,0.5);
        }

        .envelope-wrapper.open .flap.top { transform: rotateX(180deg); }
        .envelope-wrapper.open .star { opacity: 0; }
        .envelope-wrapper.open { opacity: 0; }
        
        .letter {
            width: 100%;
            min-height: 100vh;
            margin: 0;
            padding: 40px 5%;
            font-family: 'Nanum Pen Script', cursive;
            font-size: 24px;
            color: #2b3a60;
            line-height: 48px;
            background-color: #fdfaf2;
            background-size: 100% 48px;
            background-image: repeating-linear-gradient( #fdfaf2, #fdfaf2 47px, #d4e4ff 47px, #d4e4ff 48px );
            background-position-y: 135px;
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 1s ease-in-out, transform 1s ease-in-out;
            transition-delay: 0.8s;
            display: none;
        }

        .letter.visible {
            opacity: 1;
            transform: translateY(0);
            display: block;
        }

        .letter > * { margin: 0; }
        .letter .to { font-size: 26px; font-weight: bold; margin-bottom: 48px; }
        .letter .message { margin-bottom: 0; }
        .letter .message + .message { margin-top: 48px; }
        .letter .from { text-align: right; margin-top: 48px; font-size: 26px; }
        .letter .date { text-align: right; margin-top: 0; font-size: 22px; }
    </style>
</head>
<body>
    
    <canvas id="universe"></canvas>

    <div class="envelope-wrapper">
        <div class="envelope">
            <div class="flap front"></div> 
            <div class="flap top"></div>
            <div class="letter-body"></div>
            <div class="star">★</div>
        </div>
        <p class="click-to-open">빛나는 별</p>
    </div>

    <div class="letter" id="letter">
        <h1 class="to">To.YOU</h1>

        <p class="message">수능 보느라 정말 고생 많았어!!</p>
        <p class="message">어쩌면 홀가분한 마음 혹은 아쉬운 마음도 있을 수 있겠지만, 어떤 감정이든 괜찮아. 지금 네가 느끼는 모든 것은 지극히 당연한 거야.</p>
        <p class="message">결과가 어떻든 이 시험 하나가 너의 가치를 전부 증명하지는 않아. 그보다 중요한 건, 네가 지난 시간동안 힘들게 얻은 것들이야. 그건 단순히 문제를 푸는 능력이 아니야. 숫자로 평가할 수 없는 그 노력들은 앞으로 너의 삶을 단단하게 지탱해 줄 소중한 자산이 될 거야. 너의 지난 시간과 노력 그 자체로 넌 이미 멋지고 대단한 사람이야.</p>
        <p class="message">그러니까 이제 무거운 짐을 내려놓고 푹 쉬었으면 좋겠어. 그동안 못 잤던 잠도 자고, 맛있는 것도 먹고, 하고 싶었던 것도 하면서 말이야 :) 앞으로 너의 앞에는 더 넓은 세상이 펼쳐질 거야. 새로운 사람들을 만나고, 다양한 경험을 하고, 때로는 넘어지고 상처받으며 새로운 '나'를 찾아가는 여정이지. 수능은 네가 걸어갈 긴 인생의 종착지가 아닌 수많은 갈림길 중 하나일 뿐, 그 길 위에서 어떤 풍경을 보고 무엇을 느끼며 어떻게 걸어갈지는 오롯이 너의 몫이야.</p>
        <p class="message">사실 네가 수능까지 길고 힘든 시간을 버텨내는 동안, 정작 내가 할 수 있는 게 아무것도 없다는 사실이 많이 속상하고 미안했어. 그래서 혹시 네가 이 글을 보게 된다면 조금이라도 도움이 되지 않을까? 하는 생각에 편지를 쓰게 됐어.</p>
        <p class="message">처음엔 물어보고 싶은 것도, 말하고 싶은 것도 많았는데 지금은 너에게 어떤 부담도 주지 않는 게 맞는 것 같아서 내 마음만 남길게.</p>
        <p class="message">이 편지가 마지막이 될지 시작이 될지 모르겠지만, 네가 어떤 길을 가든 나는 항상 너를 지지하고 응원할 거야. 나도 내 자리에서 언제든 네가 기댈 수 있는 사람이 되도록 노력하고 있을게.</p>
        <p class="message">"앞으로의 미래가 찬란하게 빛나길 ✨"</p>

        <p class="from">항상 너를 응원하는 누군가가</p>
        <p class="date">2025.11.13</p>
    </div>

    <script>
        const universeCanvas = document.getElementById('universe');
        const universeCtx = universeCanvas.getContext('2d');
        let universeW, universeH, universeDpr = Math.max(1, window.devicePixelRatio || 1);
        let animationFrameId = null;

        function resizeUniverse() {
            universeW = innerWidth;
            universeH = innerHeight;
            universeCanvas.width = universeW * universeDpr;
            universeCanvas.height = universeH * universeDpr;
            universeCtx.setTransform(universeDpr, 0, 0, universeDpr, 0, 0);
        }
        window.addEventListener('resize', resizeUniverse);
        resizeUniverse();

        const stars = [];
        function createStars(count) {
            stars.length = 0;
            for (let i = 0; i < count; i++) {
                const colorRand = Math.random();
                let color;
                if (colorRand < 0.7) { color = '#ffffff'; } 
                else if (colorRand < 0.82) { color = '#aabfff'; } 
                else if (colorRand < 0.94) { color = '#ffd2a1'; } 
                else { color = '#ffcc6f'; }
                stars.push({ x: Math.random() * universeW, y: Math.random() * universeH, r: Math.pow(Math.random(), 3) * 1.8 + 0.2, tw: Math.random() * Math.PI * 2, twSpeed: Math.random() * 0.01 + 0.005, c: color });
            }
        }

        createStars(Math.round((universeW * universeH) / 800));
        window.addEventListener('resize', () => createStars(Math.round((universeW * universeH) / 800)));

        function drawUniverse() {
            universeCtx.clearRect(0, 0, universeW, universeH);
            stars.forEach(s => {
                s.tw += s.twSpeed;
                const baseAlpha = (s.r / 2.0) * 0.7 + 0.3; 
                const twinkleAlpha = 0.5 + Math.sin(s.tw) * 0.5;
                universeCtx.globalAlpha = baseAlpha * twinkleAlpha;
                const gradient = universeCtx.createRadialGradient(s.x, s.y, 0, s.x, s.y, s.r);
                const starColorHex = s.c.substring(1);
                const r = parseInt(starColorHex.slice(0, 2), 16), g = parseInt(starColorHex.slice(2, 4), 16), b = parseInt(starColorHex.slice(4, 6), 16);
                gradient.addColorStop(0, `rgba(${r}, ${g}, ${b}, 1)`);
                gradient.addColorStop(0.5, `rgba(${r}, ${g}, ${b}, 0.5)`);
                gradient.addColorStop(1, `rgba(${r}, ${g}, ${b}, 0)`);
                universeCtx.fillStyle = gradient;
                universeCtx.beginPath();
                universeCtx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
                universeCtx.fill();
            });
            universeCtx.globalAlpha = 1;
            animationFrameId = requestAnimationFrame(drawUniverse);
        }
        
        drawUniverse();

        window.stopAnimation = function() {
            if (animationFrameId) {
                cancelAnimationFrame(animationFrameId);
                animationFrameId = null;
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const envelopeWrapper = document.querySelector('.envelope-wrapper');
            const letter = document.getElementById('letter');

            envelopeWrapper.addEventListener('click', function() {
                envelopeWrapper.classList.add('open');

                setTimeout(function() {
                    envelopeWrapper.style.display = 'none';
                    if (window.stopAnimation) {
                        window.stopAnimation();
                    }
                    universeCanvas.style.display = 'none';
                    
                    document.body.style.height = 'auto';
                    document.documentElement.style.height = 'auto';
                    document.body.style.overflow = 'auto';
                    document.documentElement.style.overflow = 'auto';

                    letter.classList.add('visible');
                    document.body.style.background = '#fdfaf2';
                }, 1000);
            });
        });
    </script>
</body>
</html>
